flowchart TD
    A[Пользователь] -->|Загружает файл + роли| B[Web UI]
    B --> C[Backend: сохранить файл]
    C --> D[Извлечение текста из PDF/TXT/DOCX/MD]
    D --> E[LLM: извлечь этапы, задачи > JSON]
    E --> I[Структура: этапы > задачи > роли]

    D --> J[LLM: краткое содержание ТЗ]

    I --> L[Для каждой задачи: RAG-поиск в Vector DB]
    L --> M[Доп. данные: прошлые оценки, best practices]

    J & M --> N[Формирование prompt'а для оценки]
    N --> O1[LLM #1: оценка]
    N --> O2[LLM #2: оценка]
    N --> O3[LLM #3: оценка]

    O1 --> P[Сбор оценок]
    O2 --> P
    O3 --> P

    P --> Q[Агрегация /среднее/]
    Q --> R[Формирование итоговой таблицы]
    R --> S[Генерация Excel / CSV]
    S --> T[Отдача пользователю через UI]

    style A fill:#4CAF50,stroke:#388E3C,color:white
    style T fill:#2196F3,stroke:#0D47A1,color:white